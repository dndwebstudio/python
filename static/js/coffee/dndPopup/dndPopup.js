// Generated by CoffeeScript 1.12.4
(function() {
  var popupStart;

  $(document).ready(function() {
    return $('body').append('<div id="DND_POPUP"></div>');
  });

  $.fn.dndPopupInit = function(href, data, sendType, callback) {
    var $ajaxGet;
    if (href == null) {
      href = false;
    }
    if (data == null) {
      data = {};
    }
    if (sendType == null) {
      sendType = "POST";
    }
    if (callback == null) {
      callback = false;
    }
    if (href === false) {
      return console.log('error init DND-popUp');
    } else {
      $ajaxGet = $.ajax({
        url: href,
        data: data,
        type: sendType
      });
      return $ajaxGet.done(function(data) {
        if (data) {
          popupStart(data);
          if (callback) {
            return callback();
          }
        } else {
          return console.log('error get data DND-popUp');
        }
      });
    }
  };

  $.fn.dndPopupInitByHTML = function(htmlData) {
    return popupStart(htmlData);
  };

  popupStart = function(htmlData) {
    var $main;
    $main = $('body #DND_POPUP');
    $main.append('<div class="bbc_pa_block"><div class="bbc_pa_layout"></div><div class="bbc_pa_outContentBlock"><div class="bbc_pa_layout"></div><div class="bbc_pa_innerContentBlock child"><div class="bbc_pa_layout"></div><div class="bbc_pa_contentBlock child">' + htmlData + '<span class="bbc_pa_close">&#10006;</span></div><div class="helper"></div></div><div class="helper"></div></div></div>');
    $main.find('.bbc_pa_block').css({
      opacity: 0
    });
    $main.find('.bbc_pa_block').animate({
      opacity: 1
    }, 350);
    return $main.on('click', '.bbc_pa_close, .bbc_pa_layout', function() {
      return $main.find('.bbc_pa_block').animate({
        opacity: 0
      }, 250, function() {
        return $main.html('');
      });
    });
  };

}).call(this);

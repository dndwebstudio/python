(function(){$.fn.jewDream=function(){var a;if(!$("body>div").is("#jewDreamGalleryArea")){$("body").append('<div id="jewDreamGalleryArea"></div>')}$(this).on("click",function(){var c,b;console.log("1");c=$(this).attr("data-id");b=$(this).attr("data-photo");$.ajax({url:"/ajax/ajax_get_photo_for_gallery.php",type:"POSt",data:{itemID:c},beforeSend:function(){return a()},success:function(f){var d,e;d=$(document).find("div#jewDreamGalleryArea");if(f){f=JSON.parse(f);e=0;f.forEach(function(h,g){d.find(".jdga_gs_mian_slider").append('<img data-ind="'+(g+1)+'" src="'+h.full+'" data-id="'+h.id+'"/>');d.find(".jdga_gs_mirror_slider_inner").append('<li data-ind="'+(g+1)+'" data-id="'+h.id+'"><img src="'+h.resize+'"/></li>');return e+=parseInt(d.find(".jdga_gs_mirror_slider_inner>li").eq(-1).innerWidth())});if(b){d.find(".jdga_gs_mian_slider>img").each(function(){if($(this).attr("data-id")===b){$(this).addClass("activeJD");return d.find(".jdga_gs_mirror_slider_inner").find('li[data-id="'+$(this).attr("data-id")+'"]').addClass("activeJD")}})}else{d.find(".jdga_gs_mian_slider>img").eq(0).addClass("activeJD");d.find(".jdga_gs_mirror_slider_inner").find('li[data-id="'+d.find(".jdga_gs_mian_slider>img").eq(0).attr("data-id")+'"]').addClass("activeJD")}return d.find(".jdga_gallery_preloader").animate({opacity:0},250,function(){$(this).css({display:"none"});d.find(".jdga_gallery_sliders").css({display:"block",opacity:0});d.find(".jdga_gs_mirror_slider_inner>li").each(function(){$(this).attr("data-prevWidth",e);e+=parseInt($(this).innerWidth())+16;return $(this).attr("data-postWidth",e)});if(e>d.find(".jdga_gs_mirror_slider_out").innerWidth()){d.find(".jdga_gs_mirror_slider_inner").css({width:e+"px"})}d.find(".jdga_gs_mirror_slider_inner").attr({"data-width":e});return d.find(".jdga_gallery_sliders").animate({opacity:1},250)})}else{return d.html("")}}});return false});$(document).on("click",".jdga_gs_close",function(){var b;b=$(document).find("div#jewDreamGalleryArea");return b.find(".jdga_gallery").animate({opacity:0},250,function(){return b.html("")})});$(document).on("click",".jdga_gs_mian_prev, .jdga_gs_mian_next",function(){var b,c,e,d;c=$(document).find("div#jewDreamGalleryArea");b=c.find(".jdga_gs_mian_slider>img.activeJD");e=b.attr("data-ind");if($(this).hasClass("jdga_gs_mian_prev")){e=parseInt(e)-1;if(e<1){e=c.find(".jdga_gs_mian_slider>img").eq(-1).attr("data-ind")}}else{e=parseInt(e)+1;console.log(e)}if(!c.find('.jdga_gs_mian_slider>img[data-ind="'+e+'"]').is("img")){d=c.find('.jdga_gs_mian_slider>img[data-ind="1"]')}else{d=c.find('.jdga_gs_mian_slider>img[data-ind="'+e+'"]')}return b.animate({opacity:0},150,function(){var f,h,j,i,g;c.find(".jdga_gs_mirror_slider_inner").find('li[data-id="'+b.attr("data-id")+'"]').removeClass("activeJD");b.removeClass("activeJD");d.css({opacity:0});d.addClass("activeJD");c.find(".jdga_gs_mirror_slider_inner").find('li[data-id="'+d.attr("data-id")+'"]').addClass("activeJD");d.animate({opacity:1},150);g=parseInt(c.find(".jdga_gs_mirror_slider_inner").css("left").replace("px","").replace("-",""));j=parseInt(c.find(".jdga_gs_mirror_slider_out").innerWidth());h=c.find(".jdga_gs_mirror_slider_inner").find("li.activeJD").attr("data-prevWidth");f=c.find(".jdga_gs_mirror_slider_inner").find("li.activeJD").attr("data-postWidth");i=false;if(h<g){i=parseInt(h)}else{if(f>(j+g)){i=parseInt(f)-j}}if(i>=0){return c.find(".jdga_gs_mirror_slider_inner").animate({left:"-"+i+"px"},200)}})});$(document).on("click",".jdga_gs_mirror_slider_inner>li",function(){var b,c,d;c=$(document).find("div#jewDreamGalleryArea");b=c.find(".jdga_gs_mian_slider>img.activeJD");d=c.find('.jdga_gs_mian_slider>img[data-id="'+$(this).attr("data-id")+'"]');return b.animate({opacity:0},150,function(){c.find(".jdga_gs_mirror_slider_inner").find('li[data-id="'+b.attr("data-id")+'"]').removeClass("activeJD");b.removeClass("activeJD");d.css({opacity:0});d.addClass("activeJD");c.find(".jdga_gs_mirror_slider_inner").find('li[data-id="'+d.attr("data-id")+'"]').addClass("activeJD");return d.animate({opacity:1},150)})});$(document).on("click",".jdga_gs_mirror_prev, .jdga_gs_mirror_next",function(){var b,g,f,d,c,e;b=$(document).find("div#jewDreamGalleryArea");if(parseInt(b.find(".jdga_gs_mirror_slider_inner").innerWidth())>parseInt(b.find(".jdga_gs_mirror_slider_out").innerWidth())){d=0;e=parseInt(b.find(".jdga_gs_mirror_slider_inner").innerWidth());c=parseInt(b.find(".jdga_gs_mirror_slider_inner").css("left").replace("px","").replace("-",""));f=parseInt(b.find(".jdga_gs_mirror_slider_out").innerWidth());if($(this).hasClass("jdga_gs_mirror_prev")){g=false;b.find(".jdga_gs_mirror_slider_inner>li").each(function(){if($(this).attr("data-prevWidth")<c){return g=$(this).attr("data-ind")}});if(g){if(g>1){g=parseInt(g)-1}d=b.find('.jdga_gs_mirror_slider_inner>li[data-ind="'+g+'"]').attr("data-prevWidth")}else{d=false}}else{g=false;b.find(".jdga_gs_mirror_slider_inner>li").each(function(){if($(this).attr("data-postWidth")>(c+f)&&!g){return g=$(this).attr("data-ind")}});if(g){if(b.find('.jdga_gs_mirror_slider_inner>li[data-ind="'+(parseInt(g)+1)+'"]').is("li")){g=parseInt(g)+1}d=parseInt(b.find('.jdga_gs_mirror_slider_inner>li[data-ind="'+g+'"]').attr("data-postWidth"))-f}else{d=false}}console.log(d);if(d>=0){return b.find(".jdga_gs_mirror_slider_inner").animate({left:"-"+d+"px"},200)}}});$(window).resize(function(){var c,d,e,b;c=$(document).find("div#jewDreamGalleryArea");b=window.innerHeight;e=b-140;c.find(".jdga_gs_mian").css({height:e+"px"});d=parseInt(c.find(".jdga_gs_mirror_slider_inner").attr("data-width"));if(d>c.find(".jdga_gs_mirror_slider_out").innerWidth()){return c.find(".jdga_gs_mirror_slider_inner").css({width:d+"px"})}else{return c.find(".jdga_gs_mirror_slider_inner").css({width:"100%",left:0})}});return a=function(){var c,d,b;c=$(document).find("div#jewDreamGalleryArea");c.append('<div class="jdga_gallery"> <div class="jdga_gallery_backLayout"></div> <div class="jdga_gallery_preloader"> <div class="jdga_gallery_preloader_item child"></div> <div class="helper"></div> </div> <div class="jdga_gallery_sliders"> <div class="jdga_gs_mian"> <div class="jdga_gs_close">&#10006;</div> <div class="jdga_gs_mian_slider"> </div> <div class="jdga_gs_mian_prev"> <div class="child"></div> <div class="helper"></div> </div> <div class="jdga_gs_mian_next"> <div class="child"></div> <div class="helper"></div> </div> </div> <div class="jdga_gs_mirror"> <div class="jdga_gs_mirror_slider"> <div class="jdga_gs_mirror_slider_out"> <ul style="left: 0px;" class="jdga_gs_mirror_slider_inner"></ul> </div> </div> <div class="jdga_gs_mirror_prev"> <div class="child"></div> <div class="helper"></div> </div> <div class="jdga_gs_mirror_next"> <div class="child"></div> <div class="helper"></div> </div> </div> </div> </div>');b=window.innerHeight;d=b-140;return c.find(".jdga_gs_mian").css({height:d+"px"})}}}).call(this);